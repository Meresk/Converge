# Для продакшн-среды в локальной сети
Развертывание программного обеспечения осуществляется на чистом
хосте под управлением ОС на базе Linux.

Процесс установки включает несколько ключевых этапов от подготовки самого хоста до запуска всех компонентов приложения в контейнерах Docker.

При подготовке ОС стоит обновить пакеты через менеджер пакетов и
установить Docker с Docker compose, крайне важно знать и утвердить
статический адрес хоста в сети. Если на используемом хосте есть фаервол, следует открыть порты 80, 443, 7880, 7882. Также крайне важно открыть диапазон UDP-портов от 50000 до 60000, которые использует LiveKit для передачи медиа-трафика.

Нужно перенести исходные файлы проекта в отдельный каталог
(например, app). После требуется настроить «livekit.yaml», «.env» для бэкенд
части приложения и «.env» для фронтенд части приложения.
Для livekit.yaml требуется в параметре node_ip указать статический IP
адрес хоста в сети и ключ с секретом в блоке keys (например, LK123: 4123trgq)

Для «.env» у бэкенд части приложения требуется настроить следующие
параметры:
- LIVEKIT_API_KEY – ключ LiveKit API;
- LIVEKIT_API_SECRET – секрет LiveKit API;
- DATABASE_DSN – строка подключения к MySQL БД в стиле GORM;
- JWT_SECRET_KEY – секретный ключ для подписания JWT токенов;
- CORS_ALLOW_ORIGINS – IP-адрес или доменное имя хоста для
настройки CORS политики.

Для «.env» у фронтенд части приложения требуется настроить
следующие параметры:
- VITE_API_BASE_URL – «https://» + IP адрес или доменное имя хоста
с добавлением «/api»;
- VITE_SERVER_URL – «wss://» + IP адрес или доменное имя хоста с
«/livekit».

Дальше требуется либо создать каталог certs и добавить туда
подписанные сертификаты, либо запустить скрипт «generate_crt_with_ca.sh».

Если своего центра сертификации нет и использован скрипт
«generate_crt_with_ca.sh», требуется распространить сгенерированный файл «ca.crt» из каталога «certs» на все компьютеры, подключенные к локальной сети, которым нужно пользоваться приложением.

* Убедитесь что вы нигде не используете стандартные значения для переменных!

Для запуска сервиса требуется вписать команду «docker compose up -d»
в deploy/prod.