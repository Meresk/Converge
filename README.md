# Converge

## Описание проекта

**Converge** — это программное обеспечение, разработанное для эффективного взаимодействия преподавателей и студентов в компьютерных классах учебного заведения. Приложение позволяет преподавателям создавать виртуальные комнаты, куда студенты могут подключаться. В этих комнатах преподаватель имеет возможность стримить свой экран, обмениваться сообщениями в чате, а также загружать и удалять файлы в общем хранилище.

Основная цель проекта — упростить проведение занятий, предоставляя удобные инструменты для коммуникации и обмена информацией в реальном времени, адаптированные под нужды образовательной среды.

---

## Ключевые функции

* **Управление комнатами:** Преподаватели могут создавать виртуальные комнаты, управлять ими и модерировать их.
* **Трансляция экрана:** Возможность для преподавателя стримить содержимое своего экрана всем подключенным студентам.
* **Чат:** Встроенный текстовый чат для обмена сообщениями между участниками комнаты (на данный момент только преподаватель может писать в чат, сделано это из-за отсуствия модерации).
* **Файловое хранилище:** Функциональность для загрузки, просмотра и удаления файлов, доступных всем участникам комнаты.
* **Авторизация и роли:** Система авторизации для разграничения доступа между преподавателями и студентами, а также управление правами доступа внутри комнат и к другим функциям приложения.

---

## Используемые технологии

Проект **Converge** построен на базе современных и производительных технологий, обеспечивающих надежность и масштабируемость:

* **Frontend (Клиентская часть):**
    * **React:** Библиотека для создания динамичных пользовательских интерфейсов.
    * **TypeScript:** Расширение JavaScript, добавляющее статическую типизацию.
    * **Vite:** Быстрый сборщик проектов для ускоренной разработки.
    * **Material UI:** Библиотека компонентов для создания современного UI.
    * **LiveKit SDK:** Клиентский комплект разработки для интеграции WebRTC.
* **Backend (Серверная часть):**
    * **Go (Golang):** Компилируемый язык программирования, известный своей производительностью.
    * **Fiber:** Легковесный и быстрый веб-фреймворк для Go.
    * **LiveKit SDK:** Серверный комплект разработки для взаимодействия с LiveKit SFU.
* **База данных (DB):**
    * **MySQL:** Популярная реляционная система управления базами данных.
* **Сервер потоковой передачи данных:**
    * **LiveKit SFU (Selective Forwarding Unit):** Специализированный сервер для обработки и маршрутизации мультимедийных данных (видео, аудио) по протоколу WebRTC.
* **Развертывание и оркестрация:**
    * **Docker:** Платформа для контейнеризации приложений.
    * **Docker Compose:** Инструмент для определения и запуска многоконтейнерных Docker-приложений.

---

## Структура проекта

Проект имеет модульную структуру, что обеспечивает четкое разделение ответственности и упрощает разработку:

* **`backend/`**: Содержит исходный код серверной части приложения на Go, организованный по архитектуре **repository - service - handler**.
* **`frontend/`**: Включает исходный код клиентской части на React/TypeScript, структурированный по **компонентам**, **страницам** и **сервисам** (функции для запросов к API).
* **`certs/`**: Директория для хранения SSL/TLS сертификатов, используемых Nginx и другими сервисами.
* **`scripts/`**: Содержит вспомогательные **Bash-скрипты**, включая скрипт для создания собственного Центра Сертификации (CA) и выпуска SSL/TLS сертификатов.

---

## Установка и запуск

#### Для локального развертывания или разработки на OS windows
* запустить livekit из каталога livekit_windows_develop (инструкция внутри)
* запустить docker-compose.yaml из каталога deploy/local
* запустить бэкенд-часть - go run main.go из каталога backend/cmd
* настроить .env для фронтенд части
* запустить  фронтенд часть - npm install; npm run dev из каталога frontend/

---

#### Для продакшн-среды в локальной сети
Развертывание программного обеспечения осуществляется на чистом
хосте под управлением ОС на базе Linux.

Процесс установки включает несколько ключевых этапов от подготовки самого хоста до запуска всех компонентов приложения в контейнерах Docker.

При подготовке ОС стоит обновить пакеты через менеджер пакетов и
установить Docker с Docker compose, крайне важно знать и утвердить
статический адрес хоста в сети. Если на используемом хосте есть фаервол, следует открыть порты 80, 443, 7880, 7882. Также крайне важно открыть диапазон UDP-портов от 50000 до 60000, которые использует LiveKit для передачи медиа-трафика.


Нужно перенести исходные файлы проекта в отдельный каталог
(например, app). После требуется настроить «livekit.yaml», «.env» для бэкенд
части приложения и «.env» для фронтенд части приложения.
Для livekit.yaml требуется в параметре node_ip указать статический IP
адрес хоста в сети и ключ с секретом в блоке keys (например, LK123: 4123trgq)

Для «.env» у бэкенд части приложения требуется настроить следующие
параметры:
- LIVEKIT_API_KEY – ключ LiveKit API;
- LIVEKIT_API_SECRET – секрет LiveKit API;
- DATABASE_DSN – строка подключения к MySQL БД в стиле GORM;
- JWT_SECRET_KEY – секретный ключ для подписания JWT токенов;
- CORS_ALLOW_ORIGINS – IP-адрес или доменное имя хоста для
настройки CORS политики.

Для «.env» у фронтенд части приложения требуется настроить
следующие параметры:
- VITE_API_BASE_URL – «https://» + IP адрес или доменное имя хоста
с добавлением «/api»;
- VITE_SERVER_URL – «wss://» + IP адрес или доменное имя хоста с
«/livekit».

Дальше требуется либо создать каталог certs и добавить туда
подписанные сертификаты, либо запустить скрипт «generate_crt_with_ca.sh».

Если своего центра сертификации нет и использован скрипт
«generate_crt_with_ca.sh», требуется распространить сгенерированный файл «ca.crt» из каталога «certs» на все компьютеры, подключенные к локальной сети, которым нужно пользоваться приложением.

* Убедитесь что вы нигде не используете стандартные значения для переменных!

Для запуска сервиса требуется вписать команду «docker compose up -d»
в deploy/prod.

---

## Скриншоты

### Главная страница
<img width="1271" height="766" alt="image" src="https://github.com/user-attachments/assets/b9eba3ad-2f60-4ab3-a676-043316f8229a" />

### Страница студента
<img width="2548" height="1224" alt="image" src="https://github.com/user-attachments/assets/5d9c9bc9-1701-4042-a5fb-c0a04fe301dd" />

### Страница входа для преподавателя / администратора
<img width="1330" height="884" alt="image" src="https://github.com/user-attachments/assets/5a8dc4cc-1934-4cf5-90d1-4aa37b259a1f" />

### Страница преподавателя
<img width="1446" height="783" alt="image" src="https://github.com/user-attachments/assets/dbaa0d14-af94-46b0-bb57-f38b61d2e93e" />

### Страница преподавателя - добавления комнаты
<img width="1447" height="784" alt="image" src="https://github.com/user-attachments/assets/26703252-a0b8-48cf-ba40-831615f1a7fb" />

### Страница преподавателя - табличный вид комнат с доп. функциями и информацией
<img width="1754" height="910" alt="image" src="https://github.com/user-attachments/assets/73250884-d640-4fba-98c5-d0eda05655c1" />

### Страница администратора
<img width="1908" height="943" alt="image" src="https://github.com/user-attachments/assets/e9099f11-2dc5-4f75-8634-f64ae4b6b3f6" />

### Вид внутри комнаты от преподавателя
<img width="2539" height="1279" alt="image" src="https://github.com/user-attachments/assets/d1fd9038-b53c-420e-9d8c-f8daa680c046" />

### Вид внутри комнаты от студента
<img width="2555" height="1276" alt="image" src="https://github.com/user-attachments/assets/6e0d0a28-c7b8-4d5a-adb6-8efdf0624957" />

---

## Будущие планы

* добавление полной модерации участников для преподавателя
* отслеживание и отображение локального IP участника и отображение преподавателю
* Добавление новых интерактивных инструментов для преподавателей и студентов.
* Расширение функциональности комнат.

---

## Автор

* **Yakov**
